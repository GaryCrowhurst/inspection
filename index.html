<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motorsport Race Inspection Checklist</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #00594F;
            --secondary: #FFD200;
            --success: #00C896;
            --warning: #FFD200;
            --danger: #FF3A2F;
            --light: #ffffff;
            --dark: #000000;
            --grey: #64748b;
            --accent: #9EE6CF;
            --background: #f0fdf4;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--background);
            color: var(--dark);
            line-height: 1.6;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .tab-nav {
            display: flex;
            background-color: var(--light);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .tab-nav button {
            flex: 1;
            background: none;
            border: none;
            padding: 0.75rem 0.5rem;
            font-weight: 600;
            color: var(--grey);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab-nav button.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .student-info {
            background-color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn:hover {
            opacity: 0.9;
        }
        
        .section-title {
            margin: 1.5rem 0 1rem;
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 0.5rem;
        }
        
        .checklist-item {
            background-color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .checklist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .checklist-title {
            font-weight: 600;
            flex: 1;
        }
        
        .checklist-status {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .status-pending {
            background-color: #f1f5f9;
            color: var(--grey);
        }
        
        .status-pass {
            background-color: #dcfce7;
            color: var(--success);
        }
        
        .status-fail {
            background-color: #fee2e2;
            color: var(--danger);
        }
        
        .status-warning {
            background-color: #fef3c7;
            color: var(--warning);
        }
        
        .checklist-content {
            display: none;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
            margin-top: 1rem;
        }
        
        .checklist-content.active {
            display: block;
        }
        
        .guidance-text {
            background-color: #f8fafc;
            padding: 0.75rem;
            border-left: 3px solid var(--primary);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .radio-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .radio-option input {
            width: auto;
            accent-color: var(--primary);
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: auto;
            min-width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }
        
        .photo-container {
            margin: 1rem 0;
        }
        
        .photo-preview {
            width: 100%;
            height: 200px;
            background-color: #f1f5f9;
            border: 1px dashed #cbd5e1;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }
        
        .photo-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .progress-container {
            margin: 1.5rem 0;
        }
        
        .progress-bar {
            height: 0.5rem;
            background-color: #e2e8f0;
            border-radius: 999px;
            overflow: hidden;
        }
        
        .progress-value {
            height: 100%;
            background-color: var(--success);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .action-buttons .btn {
            flex: 1;
        }
        
        .summary-section {
            background-color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        footer {
            text-align: center;
            padding: 1rem;
            color: var(--grey);
            font-size: 0.875rem;
            margin-top: 2rem;
        }
        
        /* Toast notifications */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .toast {
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
            width: 300px;
            color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.3s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .toast-success {
            background-color: var(--success);
        }
        
        .toast-error {
            background-color: var(--danger);
        }
        
        .toast-info {
            background-color: var(--primary);
        }
        
        .toast-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1rem;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow: auto;
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            width: 90%;
            max-width: 600px;
            border-radius: 8px;
            overflow: hidden;
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            padding: 1rem;
            background-color: var(--primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-weight: 600;
            font-size: 1.25rem;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 1rem;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 1rem;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            border-top: 1px solid #e2e8f0;
        }
        
        /* Report preview styles */
        .report-container {
            padding: 20px;
            background-color: white;
        }
        
        .report-header {
            border-bottom: 2px solid var(--primary);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .report-title {
            color: var(--primary);
            font-size: 24px;
            font-weight: bold;
        }
        
        .report-subtitle {
            color: var(--grey);
            font-size: 16px;
            margin-top: 5px;
        }
        
        .report-metadata {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .report-metadata-item {
            background-color: #f8fafc;
            padding: 10px;
            border-radius: 4px;
        }
        
        .report-metadata-label {
            font-weight: bold;
            color: var(--primary);
            font-size: 14px;
        }
        
        .report-metadata-value {
            font-size: 16px;
            margin-top: 5px;
        }
        
        .report-section {
            margin-bottom: 20px;
        }
        
        .report-section-title {
            color: var(--primary);
            font-size: 18px;
            font-weight: bold;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .report-item {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 4px;
            background-color: #f8fafc;
        }
        
        .report-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .report-item-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .report-item-notes {
            margin-top: 10px;
            font-style: italic;
        }
        
        .report-images {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .report-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
        }
        
        .report-footer {
            margin-top: 30px;
            text-align: center;
            color: var(--grey);
            font-size: 14px;
        }
        
        /* For smaller mobile screens */
        @media (max-width: 480px) {
            .tab-nav button {
                font-size: 0.8rem;
                padding: 0.6rem 0.4rem;
            }
            
            .checklist-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .checklist-status {
                margin-top: 0.5rem;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .report-metadata {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Motorsport Race Inspection Checklist</h1>
        <p>Digital inspection tool for motorsport students</p>
    </header>
    
    <div class="container">
        <div class="tab-nav">
            <button class="tab-btn active" data-tab="setup">Setup</button>
            <button class="tab-btn" data-tab="pre-race">Pre-Race</button>
            <button class="tab-btn" data-tab="during-race">During Race</button>
            <button class="tab-btn" data-tab="post-race">Post-Race</button>
            <button class="tab-btn" data-tab="report">Report</button>
        </div>
        
        <!-- Setup Tab -->
        <div id="setup" class="tab-content active">
            <div class="student-info">
                <h2 class="section-title">Student & Vehicle Information</h2>
                
                <div class="form-group">
                    <label for="student-name">Student Name</label>
                    <input type="text" id="student-name" placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="student-id">Student ID</label>
                    <input type="text" id="student-id" placeholder="Enter your student ID">
                </div>
                
                <div class="form-group">
                    <label for="course">Course</label>
                    <input type="text" id="course" placeholder="Enter your course name">
                </div>
                
                <div class="form-group">
                    <label for="instructor">Instructor</label>
                    <input type="text" id="instructor" placeholder="Enter instructor's name">
                </div>
                
                <div class="form-group">
                    <label for="inspection-date">Inspection Date</label>
                    <input type="date" id="inspection-date">
                </div>
                
                <div class="form-group">
                    <label for="vehicle-make">Vehicle Make</label>
                    <input type="text" id="vehicle-make" placeholder="Enter vehicle make">
                </div>
                
                <div class="form-group">
                    <label for="vehicle-model">Vehicle Model</label>
                    <input type="text" id="vehicle-model" placeholder="Enter vehicle model">
                </div>
                
                <div class="form-group">
                    <label for="vehicle-year">Vehicle Year</label>
                    <input type="number" id="vehicle-year" placeholder="Enter vehicle year">
                </div>
                
                <div class="form-group">
                    <label for="vehicle-class">Vehicle Class</label>
                    <select id="vehicle-class">
                        <option value="">Select a class</option>
                        <option value="Formula Student">Formula Student</option>
                        <option value="GT">GT</option>
                        <option value="Prototype">Prototype</option>
                        <option value="Touring Car">Touring Car</option>
                        <option value="Rally">Rally</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="vehicle-number">Vehicle Number</label>
                    <input type="text" id="vehicle-number" placeholder="Enter vehicle number">
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-success" id="save-setup">Save Information</button>
                    <button class="btn" id="next-to-pre-race">Continue to Pre-Race Inspection</button>
                </div>
            </div>
        </div>
        
        <!-- Pre-Race Tab -->
        <div id="pre-race" class="tab-content">
            <h2 class="section-title">Pre-Race Inspection</h2>
            
            <div class="progress-container">
                <p>Inspection Progress: <span id="pre-race-progress">0%</span></p>
                <div class="progress-bar">
                    <div class="progress-value" id="pre-race-progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div id="pre-race-checklist">
                <!-- Safety Equipment -->
                <div class="checklist-item" data-category="pre-race" data-section="safety-equipment">
                    <div class="checklist-header">
                        <div class="checklist-title">Safety Equipment</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Check all safety equipment for proper installation, condition, and compliance with regulations. This includes driver's safety harness, fire extinguisher, and emergency cut-off switches.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Specific Items</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="safety-equipment-harness" name="safety-equipment-checks" value="harness">
                                    <label for="safety-equipment-harness">Driver's harness meets regulations and is properly mounted</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="safety-equipment-extinguisher" name="safety-equipment-checks" value="extinguisher">
                                    <label for="safety-equipment-extinguisher">Fire extinguisher is charged, undamaged and securely mounted</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="safety-equipment-cutoff" name="safety-equipment-checks" value="cutoff">
                                    <label for="safety-equipment-cutoff">Emergency cut-off switches are functioning correctly</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="safety-equipment-ppe" name="safety-equipment-checks" value="ppe">
                                    <label for="safety-equipment-ppe">Driver's PPE meets regulations (helmet, suit, gloves, shoes)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="safety-equipment-roll" name="safety-equipment-checks" value="roll">
                                    <label for="safety-equipment-roll">Roll cage/structure is undamaged and compliant</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="safety-equipment-seat" name="safety-equipment-checks" value="seat">
                                    <label for="safety-equipment-seat">Seat is securely mounted and undamaged</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="safety-equipment-status" id="safety-equipment-pass" value="pass">
                                    <label for="safety-equipment-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="safety-equipment-status" id="safety-equipment-fail" value="fail">
                                    <label for="safety-equipment-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="safety-equipment-status" id="safety-equipment-warning" value="warning">
                                    <label for="safety-equipment-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="safety-equipment-notes">Notes</label>
                            <textarea id="safety-equipment-notes" rows="3" placeholder="Enter detailed notes about safety equipment inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="safety-equipment-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="safety-equipment-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="safety-equipment-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="safety-equipment">Save Section</button>
                    </div>
                </div>
                
                <!-- Engine -->
                <div class="checklist-item" data-category="pre-race" data-section="engine">
                    <div class="checklist-header">
                        <div class="checklist-title">Engine & Powertrain</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Inspect the engine and powertrain for leaks, secure mounting, proper fluid levels, and functionality. Check all hoses, belts, and connections for wear or damage.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Specific Items</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="engine-mounting" name="engine-checks" value="mounting">
                                    <label for="engine-mounting">Engine mounting points secure and undamaged</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="engine-oil" name="engine-checks" value="oil">
                                    <label for="engine-oil">Engine oil level within acceptable range</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="engine-coolant" name="engine-checks" value="coolant">
                                    <label for="engine-coolant">Coolant level correct and no visible leaks</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="engine-belts" name="engine-checks" value="belts">
                                    <label for="engine-belts">Drive belts in good condition with proper tension</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="engine-hoses" name="engine-checks" value="hoses">
                                    <label for="engine-hoses">All hoses secure with no cracking or leaks</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="engine-exhaust" name="engine-checks" value="exhaust">
                                    <label for="engine-exhaust">Exhaust system securely mounted with no leaks</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="engine-throttle" name="engine-checks" value="throttle">
                                    <label for="engine-throttle">Throttle operation smooth with proper return</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="engine-status" id="engine-pass" value="pass">
                                    <label for="engine-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="engine-status" id="engine-fail" value="fail">
                                    <label for="engine-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="engine-status" id="engine-warning" value="warning">
                                    <label for="engine-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="engine-notes">Notes</label>
                            <textarea id="engine-notes" rows="3" placeholder="Enter detailed notes about engine inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="engine-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="engine-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="engine-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="engine">Save Section</button>
                    </div>
                </div>
                
                <!-- Suspension & Steering -->
                <div class="checklist-item" data-category="pre-race" data-section="suspension">
                    <div class="checklist-header">
                        <div class="checklist-title">Suspension & Steering</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Check suspension components for proper installation, damage, and adjustment. Inspect steering mechanisms for play, binding, or damage. Verify all fasteners are secure and properly torqued.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Specific Items</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-arms" name="suspension-checks" value="arms">
                                    <label for="suspension-arms">Control arms/wishbones intact with no bends or cracks</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-dampers" name="suspension-checks" value="dampers">
                                    <label for="suspension-dampers">Dampers secure with no leaks or damage</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-springs" name="suspension-checks" value="springs">
                                    <label for="suspension-springs">Springs properly seated with no damage</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-bushings" name="suspension-checks" value="bushings">
                                    <label for="suspension-bushings">Bushings and bearings show no excessive wear</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-fasteners" name="suspension-checks" value="fasteners">
                                    <label for="suspension-fasteners">All fasteners present and properly torqued</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-steering" name="suspension-checks" value="steering">
                                    <label for="suspension-steering">Steering rack/box secure with no excessive play</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-alignment" name="suspension-checks" value="alignment">
                                    <label for="suspension-alignment">Wheel alignment within acceptable parameters</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="suspension-rods" name="suspension-checks" value="rods">
                                    <label for="suspension-rods">Tie rods and ball joints secure with no play</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="suspension-status" id="suspension-pass" value="pass">
                                    <label for="suspension-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="suspension-status" id="suspension-fail" value="fail">
                                    <label for="suspension-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="suspension-status" id="suspension-warning" value="warning">
                                    <label for="suspension-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="suspension-notes">Notes</label>
                            <textarea id="suspension-notes" rows="3" placeholder="Enter detailed notes about suspension and steering inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="suspension-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="suspension-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="suspension-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="suspension">Save Section</button>
                    </div>
                </div>
                
                <!-- Brakes -->
                <div class="checklist-item" data-category="pre-race" data-section="brakes">
                    <div class="checklist-header">
                        <div class="checklist-title">Braking System</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Inspect brake lines, calipers, rotors/discs, and pads for wear, damage, or leaks. Check brake fluid level and condition. Verify proper pedal feel and performance.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Specific Items</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-fluid" name="brakes-checks" value="fluid">
                                    <label for="brakes-fluid">Brake fluid level correct with no contamination</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-lines" name="brakes-checks" value="lines">
                                    <label for="brakes-lines">Brake lines and hoses secure with no leaks or damage</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-calipers" name="brakes-checks" value="calipers">
                                    <label for="brakes-calipers">Calipers mounted securely with no fluid leaks</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-pads" name="brakes-checks" value="pads">
                                    <label for="brakes-pads">Brake pads above minimum thickness with even wear</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-discs" name="brakes-checks" value="discs">
                                    <label for="brakes-discs">Brake discs/rotors above minimum thickness with no cracks</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-balance" name="brakes-checks" value="balance">
                                    <label for="brakes-balance">Brake balance adjustable and properly set</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-pedal" name="brakes-checks" value="pedal">
                                    <label for="brakes-pedal">Brake pedal has firm feel with no sponginess</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="brakes-master" name="brakes-checks" value="master">
                                    <label for="brakes-master">Master cylinder secure with no leaks</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="brakes-status" id="brakes-pass" value="pass">
                                    <label for="brakes-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="brakes-status" id="brakes-fail" value="fail">
                                    <label for="brakes-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="brakes-status" id="brakes-warning" value="warning">
                                    <label for="brakes-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="brakes-notes">Notes</label>
                            <textarea id="brakes-notes" rows="3" placeholder="Enter detailed notes about braking system inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="brakes-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="brakes-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="brakes-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="brakes">Save Section</button>
                    </div>
                </div>
                
                <!-- Tyres & Wheels -->
                <div class="checklist-item" data-category="pre-race" data-section="tyres">
                    <div class="checklist-header">
                        <div class="checklist-title">Tyres & Wheels</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Check tyres for proper inflation, condition, and wear. Inspect wheels for damage, proper mounting, and secure fasteners. Verify proper torque on all wheel nuts.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Specific Items</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-pressure" name="tyres-checks" value="pressure">
                                    <label for="tyres-pressure">Tyre pressures set to specified values for all wheels</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-wear" name="tyres-checks" value="wear">
                                    <label for="tyres-wear">Tyre tread depth above minimum with even wear pattern</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-damage" name="tyres-checks" value="damage">
                                    <label for="tyres-damage">No cuts, bulges, or damage to tyre sidewalls</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-type" name="tyres-checks" value="type">
                                    <label for="tyres-type">Correct tyre compound/type for track conditions</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-wheels" name="tyres-checks" value="wheels">
                                    <label for="tyres-wheels">Wheels undamaged with no cracks or bends</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-nuts" name="tyres-checks" value="nuts">
                                    <label for="tyres-nuts">Wheel nuts/bolts present and properly torqued</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-valves" name="tyres-checks" value="valves">
                                    <label for="tyres-valves">Valve stems intact with caps in place</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tyres-camber" name="tyres-checks" value="camber">
                                    <label for="tyres-camber">Wheel camber settings within specifications</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="tyres-status" id="tyres-pass" value="pass">
                                    <label for="tyres-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="tyres-status" id="tyres-fail" value="fail">
                                    <label for="tyres-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="tyres-status" id="tyres-warning" value="warning">
                                    <label for="tyres-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="tyres-notes">Notes</label>
                            <textarea id="tyres-notes" rows="3" placeholder="Enter detailed notes about tyres and wheels inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="tyres-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="tyres-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="tyres-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="tyres">Save Section</button>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="back-to-setup">Back</button>
                    <button class="btn btn-secondary" id="download-pre-race-report">
                        <i class="fas fa-download"></i> Download Phase Report
                    </button>
                    <button class="btn btn-success" id="next-to-during-race">Continue to During-Race Inspection</button>
                </div>
            </div>
        </div>
        
        <!-- During Race Tab -->
        <div id="during-race" class="tab-content">
            <h2 class="section-title">During-Race Inspection</h2>
            
            <div class="progress-container">
                <p>Inspection Progress: <span id="during-race-progress">0%</span></p>
                <div class="progress-bar">
                    <div class="progress-value" id="during-race-progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div id="during-race-checklist">
                <!-- Pit Stop Safety -->
                <div class="checklist-item" data-category="during-race" data-section="pit-safety">
                    <div class="checklist-header">
                        <div class="checklist-title">Pit Stop Safety</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Verify all pit stop procedures are followed correctly and safely. Check that all team members are wearing appropriate safety gear and following safety protocols.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Specific Items</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="pit-safety-ppe" name="pit-safety-checks" value="ppe">
                                    <label for="pit-safety-ppe">All team members wearing appropriate PPE</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="pit-safety-tools" name="pit-safety-checks" value="tools">
                                    <label for="pit-safety-tools">Tools and equipment organized and secure</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="pit-safety-extinguisher" name="pit-safety-checks" value="extinguisher">
                                    <label for="pit-safety-extinguisher">Fire extinguisher readily accessible</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="pit-safety-procedure" name="pit-safety-checks" value="procedure">
                                    <label for="pit-safety-procedure">Pit stop procedures performed in correct order</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="pit-safety-comms" name="pit-safety-checks" value="comms">
                                    <label for="pit-safety-comms">Communication system functioning correctly</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="pit-safety-jacks" name="pit-safety-checks" value="jacks">
                                    <label for="pit-safety-jacks">Jack operators properly positioned and coordinated</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="pit-safety-status" id="pit-safety-pass" value="pass">
                                    <label for="pit-safety-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="pit-safety-status" id="pit-safety-fail" value="fail">
                                    <label for="pit-safety-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="pit-safety-status" id="pit-safety-warning" value="warning">
                                    <label for="pit-safety-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pit-safety-notes">Notes</label>
                            <textarea id="pit-safety-notes" rows="3" placeholder="Enter detailed notes about pit stop safety inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="pit-safety-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="pit-safety-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="pit-safety-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="pit-safety">Save Section</button>
                    </div>
                </div>
                
                <!-- Tyre Condition -->
                <div class="checklist-item" data-category="during-race" data-section="tyre-condition">
                    <div class="checklist-header">
                        <div class="checklist-title">Tyre Condition & Pressure</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Assess tyre wear, temperature, and pressure during pit stops. Look for uneven wear patterns, blistering, or damage. Record pressures and temperatures if applicable.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="tyre-condition-status" id="tyre-condition-pass" value="pass">
                                    <label for="tyre-condition-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="tyre-condition-status" id="tyre-condition-fail" value="fail">
                                    <label for="tyre-condition-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="tyre-condition-status" id="tyre-condition-warning" value="warning">
                                    <label for="tyre-condition-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="tyre-condition-notes">Notes</label>
                            <textarea id="tyre-condition-notes" rows="3" placeholder="Enter detailed notes about tyre condition inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="tyre-condition-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="tyre-condition-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="tyre-condition-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="tyre-condition">Save Section</button>
                    </div>
                </div>
                
                <!-- Brake Performance -->
                <div class="checklist-item" data-category="during-race" data-section="brake-performance">
                    <div class="checklist-header">
                        <div class="checklist-title">Brake Performance</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Check brake disc/rotor temperature and pad wear during pit stops. Look for excessive wear, overheating, or any signs of brake fade reported by the driver.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="brake-performance-status" id="brake-performance-pass" value="pass">
                                    <label for="brake-performance-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="brake-performance-status" id="brake-performance-fail" value="fail">
                                    <label for="brake-performance-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="brake-performance-status" id="brake-performance-warning" value="warning">
                                    <label for="brake-performance-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="brake-performance-notes">Notes</label>
                            <textarea id="brake-performance-notes" rows="3" placeholder="Enter detailed notes about brake performance inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="brake-performance-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="brake-performance-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="brake-performance-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="brake-performance">Save Section</button>
                    </div>
                </div>
                
                <!-- Fluid Levels -->
                <div class="checklist-item" data-category="during-race" data-section="fluid-levels">
                    <div class="checklist-header">
                        <div class="checklist-title">Fluid Levels & Leaks</div>
                        <div class="checklist-status status-pending">Pending</div>
                    </div>
                    <div class="checklist-content">
                        <div class="guidance-text">
                            <p>Check for fluid leaks and verify proper fluid levels during pit stops. This includes engine oil, coolant, brake fluid, and transmission fluid if applicable.</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="fluid-levels-status" id="fluid-levels-pass" value="pass">
                                    <label for="fluid-levels-pass">Pass</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="fluid-levels-status" id="fluid-levels-fail" value="fail">
                                    <label for="fluid-levels-fail">Fail</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="fluid-levels-status" id="fluid-levels-warning" value="warning">
                                    <label for="fluid-levels-warning">Warning</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="fluid-levels-notes">Notes</label>
                            <textarea id="fluid-levels-notes" rows="3" placeholder="Enter detailed notes about fluid levels inspection"></textarea>
                        </div>
                        
                        <div class="photo-container">
                            <label>Photo Evidence</label>
                            <div class="photo-preview" id="fluid-levels-photo-preview">
                                <i class="fas fa-camera"></i>
                            </div>
                            <button class="btn" id="fluid-levels-photo-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <input type="file" id="fluid-levels-photo-input" accept="image/*" capture="environment" style="display: none">
                        </div>
                        
                        <button class="btn btn-success" data-save="fluid-levels">Save Section</button>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="back-to-pre-race">Back</button>
                    <button class="btn btn-secondary" id="download-during-race-report">
                        <i class="fas fa-download"></i> Download Phase Report
                    </button>
                    <button class="btn btn-success" id="next-to-post-race">Continue to Post-Race Inspection</button>
                </div>
            </div>
        </div>
        
<!-- Post-Race Tab -->
<div id="post-race" class="tab-content">
    <h2 class="section-title">Post-Race Inspection</h2>
    
    <div class="progress-container">
        <p>Inspection Progress: <span id="post-race-progress">0%</span></p>
        <div class="progress-bar">
            <div class="progress-value" id="post-race-progress-bar" style="width: 0%"></div>
        </div>
    </div>
    
    <div id="post-race-checklist">
        <!-- Overall Condition -->
        <div class="checklist-item" data-category="post-race" data-section="overall-condition">
            <div class="checklist-header">
                <div class="checklist-title">Overall Vehicle Condition</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Perform a complete assessment of the vehicle's condition after the race. Note any damage, excessive wear, or failures that occurred during the race.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="overall-bodywork" name="overall-condition-checks" value="bodywork">
                            <label for="overall-bodywork">Bodywork, fairings, wings, covers and hatches secure</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="overall-chassis" name="overall-condition-checks" value="chassis">
                            <label for="overall-chassis">Chassis integrity intact with no structural damage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="overall-leaks" name="overall-condition-checks" value="leaks">
                            <label for="overall-leaks">No fluid leaks visible under the vehicle</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="overall-electrical" name="overall-condition-checks" value="electrical">
                            <label for="overall-electrical">No damaged wiring or electrical components</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="overall-debris" name="overall-condition-checks" value="debris">
                            <label for="overall-debris">Vehicle cleaned of debris and track materials</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="overall-safety" name="overall-condition-checks" value="safety">
                            <label for="overall-safety">Safety equipment intact and undamaged</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="overall-condition-status" id="overall-condition-pass" value="pass">
                            <label for="overall-condition-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="overall-condition-status" id="overall-condition-fail" value="fail">
                            <label for="overall-condition-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="overall-condition-status" id="overall-condition-warning" value="warning">
                            <label for="overall-condition-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="overall-condition-notes">Notes</label>
                    <textarea id="overall-condition-notes" rows="3" placeholder="Enter detailed notes about overall vehicle condition inspection"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="overall-condition-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="overall-condition-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="overall-condition-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="overall-condition">Save Section</button>
            </div>
        </div>
        
        <!-- Safety Systems -->
        <div class="checklist-item" data-category="post-race" data-section="safety-systems">
            <div class="checklist-header">
                <div class="checklist-title">Safety Systems Check</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Inspect all safety systems for proper functionality and condition after race completion. Check for any damage or issues that may have occurred during racing.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="safety-harness" name="safety-systems-checks" value="harness">
                            <label for="safety-harness">Driver's harness/seat belts show no signs of damage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="safety-fire" name="safety-systems-checks" value="fire">
                            <label for="safety-fire">Fire extinguisher bottle full and system still armed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="safety-seat" name="safety-systems-checks" value="seat">
                            <label for="safety-seat">Driver's seat secure with no damage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="safety-roll" name="safety-systems-checks" value="roll">
                            <label for="safety-roll">Roll cage/safety cell intact with no damage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="safety-cutoff" name="safety-systems-checks" value="cutoff">
                            <label for="safety-cutoff">Emergency cutoff switches function correctly</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="safety-pads" name="safety-systems-checks" value="pads">
                            <label for="safety-pads">Protective padding and barriers intact</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="safety-systems-status" id="safety-systems-pass" value="pass">
                            <label for="safety-systems-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="safety-systems-status" id="safety-systems-fail" value="fail">
                            <label for="safety-systems-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="safety-systems-status" id="safety-systems-warning" value="warning">
                            <label for="safety-systems-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="safety-systems-notes">Notes</label>
                    <textarea id="safety-systems-notes" rows="3" placeholder="Enter detailed notes about safety systems"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="safety-systems-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="safety-systems-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="safety-systems-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="safety-systems">Save Section</button>
            </div>
        </div>
        
        <!-- Critical Fasteners -->
        <div class="checklist-item" data-category="post-race" data-section="critical-fasteners">
            <div class="checklist-header">
                <div class="checklist-title">Critical Fasteners</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Check all critical fasteners with a torque wrench to verify proper torque settings are maintained after the race. Inspect for any loosening or damage.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="fasteners-wheel" name="critical-fasteners-checks" value="wheel">
                            <label for="fasteners-wheel">Wheel nuts/bolts at correct torque with no loosening</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fasteners-suspension" name="critical-fasteners-checks" value="suspension">
                            <label for="fasteners-suspension">Suspension mounting fasteners secure and correctly torqued</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fasteners-steering" name="critical-fasteners-checks" value="steering">
                            <label for="fasteners-steering">Steering system fasteners secure with no loosening</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fasteners-engine" name="critical-fasteners-checks" value="engine">
                            <label for="fasteners-engine">Engine mounting fasteners secure</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fasteners-brakes" name="critical-fasteners-checks" value="brakes">
                            <label for="fasteners-brakes">Brake caliper and mounting fasteners secure</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fasteners-safety" name="critical-fasteners-checks" value="safety">
                            <label for="fasteners-safety">Safety equipment mounting fasteners secure</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="critical-fasteners-status" id="critical-fasteners-pass" value="pass">
                            <label for="critical-fasteners-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="critical-fasteners-status" id="critical-fasteners-fail" value="fail">
                            <label for="critical-fasteners-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="critical-fasteners-status" id="critical-fasteners-warning" value="warning">
                            <label for="critical-fasteners-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="critical-fasteners-notes">Notes</label>
                    <textarea id="critical-fasteners-notes" rows="3" placeholder="Enter detailed notes about critical fasteners inspection"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="critical-fasteners-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="critical-fasteners-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="critical-fasteners-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="critical-fasteners">Save Section</button>
            </div>
        </div>
        
        <!-- Tyre Wear Analysis -->
        <div class="checklist-item" data-category="post-race" data-section="tyre-wear">
            <div class="checklist-header">
                <div class="checklist-title">Tyre Wear Analysis</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Analyze tyre wear patterns and overall tyre condition after the race. Document wear measurements, temperature ranges during operation, and any abnormal wear patterns.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="tyre-wear-pattern" name="tyre-wear-checks" value="pattern">
                            <label for="tyre-wear-pattern">Wear pattern is even across the tyre surface</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tyre-wear-depth" name="tyre-wear-checks" value="depth">
                            <label for="tyre-wear-depth">Tread depth measurements recorded for all tyres</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tyre-wear-damage" name="tyre-wear-checks" value="damage">
                            <label for="tyre-wear-damage">No cuts, blisters, or sidewall damage present</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tyre-wear-graining" name="tyre-wear-checks" value="graining">
                            <label for="tyre-wear-graining">Graining and marbling levels documented</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tyre-wear-pressure" name="tyre-wear-checks" value="pressure">
                            <label for="tyre-wear-pressure">Post-race pressures recorded and analyzed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tyre-wear-temperature" name="tyre-wear-checks" value="temperature">
                            <label for="tyre-wear-temperature">Operating temperature range documented</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="tyre-wear-status" id="tyre-wear-pass" value="pass">
                            <label for="tyre-wear-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="tyre-wear-status" id="tyre-wear-fail" value="fail">
                            <label for="tyre-wear-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="tyre-wear-status" id="tyre-wear-warning" value="warning">
                            <label for="tyre-wear-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tyre-wear-notes">Notes</label>
                    <textarea id="tyre-wear-notes" rows="3" placeholder="Enter detailed notes about tyre wear analysis"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="tyre-wear-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="tyre-wear-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="tyre-wear-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="tyre-wear">Save Section</button>
            </div>
        </div>
        
        <!-- Brake System Analysis -->
        <div class="checklist-item" data-category="post-race" data-section="brake-analysis">
            <div class="checklist-header">
                <div class="checklist-title">Brake System Analysis</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Evaluate brake pad and disc wear after the race. Document measurements, temperature ranges during operation, and any signs of overheating or failure.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="brake-analysis-pad" name="brake-analysis-checks" value="pad">
                            <label for="brake-analysis-pad">Brake pad thickness measured and recorded</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="brake-analysis-disc" name="brake-analysis-checks" value="disc">
                            <label for="brake-analysis-disc">Brake disc thickness and condition assessed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="brake-analysis-caliper" name="brake-analysis-checks" value="caliper">
                            <label for="brake-analysis-caliper">Caliper condition checked with no fluid leaks</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="brake-analysis-fluid" name="brake-analysis-checks" value="fluid">
                            <label for="brake-analysis-fluid">Brake fluid level and condition checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="brake-analysis-heat" name="brake-analysis-checks" value="heat">
                            <label for="brake-analysis-heat">Heat discoloration/cracking inspected</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="brake-analysis-balance" name="brake-analysis-checks" value="balance">
                            <label for="brake-analysis-balance">Brake balance verified and documented</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="brake-analysis-status" id="brake-analysis-pass" value="pass">
                            <label for="brake-analysis-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="brake-analysis-status" id="brake-analysis-fail" value="fail">
                            <label for="brake-analysis-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="brake-analysis-status" id="brake-analysis-warning" value="warning">
                            <label for="brake-analysis-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="brake-analysis-notes">Notes</label>
                    <textarea id="brake-analysis-notes" rows="3" placeholder="Enter detailed notes about brake system analysis"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="brake-analysis-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="brake-analysis-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="brake-analysis-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="brake-analysis">Save Section</button>
            </div>
        </div>
        
        <!-- Suspension Analysis -->
        <div class="checklist-item" data-category="post-race" data-section="suspension-analysis">
            <div class="checklist-header">
                <div class="checklist-title">Suspension Analysis</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Thoroughly inspect suspension components after race completion. Check for any wear, damage, or alignment issues that may have occurred during racing.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="suspension-analysis-damper" name="suspension-analysis-checks" value="damper">
                            <label for="suspension-analysis-damper">Damper condition and gas pressure checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="suspension-analysis-spring" name="suspension-analysis-checks" value="spring">
                            <label for="suspension-analysis-spring">Springs inspected for damage or fatigue</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="suspension-analysis-arm" name="suspension-analysis-checks" value="arm">
                            <label for="suspension-analysis-arm">Control arms/wishbones checked for bending or damage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="suspension-analysis-bearing" name="suspension-analysis-checks" value="bearing">
                            <label for="suspension-analysis-bearing">Spherical bearings and wheel bearings checked for play</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="suspension-analysis-geometry" name="suspension-analysis-checks" value="geometry">
                            <label for="suspension-analysis-geometry">Suspension geometry measurements recorded</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="suspension-analysis-bushing" name="suspension-analysis-checks" value="bushing">
                            <label for="suspension-analysis-bushing">Bushings and mounts inspected for wear or failure</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="suspension-analysis-status" id="suspension-analysis-pass" value="pass">
                            <label for="suspension-analysis-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="suspension-analysis-status" id="suspension-analysis-fail" value="fail">
                            <label for="suspension-analysis-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="suspension-analysis-status" id="suspension-analysis-warning" value="warning">
                            <label for="suspension-analysis-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="suspension-analysis-notes">Notes</label>
                    <textarea id="suspension-analysis-notes" rows="3" placeholder="Enter detailed notes about suspension analysis"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="suspension-analysis-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="suspension-analysis-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="suspension-analysis-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="suspension-analysis">Save Section</button>
            </div>
        </div>
        
        <!-- Drivetrain Inspection -->
        <div class="checklist-item" data-category="post-race" data-section="drivetrain">
            <div class="checklist-header">
                <div class="checklist-title">Drivetrain Inspection</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Inspect the drivetrain components for wear, damage, or failures. This includes transmission, differential, axles, and CV joints if applicable.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="drivetrain-gearbox" name="drivetrain-checks" value="gearbox">
                            <label for="drivetrain-gearbox">Gearbox operation checked for all gears</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="drivetrain-clutch" name="drivetrain-checks" value="clutch">
                            <label for="drivetrain-clutch">Clutch operation and clearance checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="drivetrain-differential" name="drivetrain-checks" value="differential">
                            <label for="drivetrain-differential">Differential operation and fluid condition verified</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="drivetrain-shaft" name="drivetrain-checks" value="shaft">
                            <label for="drivetrain-shaft">Driveshaft and CV joints checked for damage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="drivetrain-fluid" name="drivetrain-checks" value="fluid">
                            <label for="drivetrain-fluid">Transmission fluid level and condition checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="drivetrain-noise" name="drivetrain-checks" value="noise">
                            <label for="drivetrain-noise">Unusual noises or vibrations documented</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="drivetrain-status" id="drivetrain-pass" value="pass">
                            <label for="drivetrain-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="drivetrain-status" id="drivetrain-fail" value="fail">
                            <label for="drivetrain-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="drivetrain-status" id="drivetrain-warning" value="warning">
                            <label for="drivetrain-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="drivetrain-notes">Notes</label>
                    <textarea id="drivetrain-notes" rows="3" placeholder="Enter detailed notes about drivetrain inspection"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="drivetrain-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="drivetrain-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="drivetrain-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="drivetrain">Save Section</button>
            </div>
        </div>
        
        <!-- Engine Performance -->
        <div class="checklist-item" data-category="post-race" data-section="engine-performance">
            <div class="checklist-header">
                <div class="checklist-title">Engine Performance Evaluation</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Evaluate engine performance data and physical condition after the race. Check for any unusual noises, vibrations, or performance issues noted during the race.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-oil" name="engine-performance-checks" value="oil">
                            <label for="engine-performance-oil">Engine oil level and pressure checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-coolant" name="engine-performance-checks" value="coolant">
                            <label for="engine-performance-coolant">Coolant level and temperature within specifications</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-throttle" name="engine-performance-checks" value="throttle">
                            <label for="engine-performance-throttle">Throttle operation reaches 100% opening</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-belts" name="engine-performance-checks" value="belts">
                            <label for="engine-performance-belts">Drive belts show no excessive wear or damage</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-exhaust" name="engine-performance-checks" value="exhaust">
                            <label for="engine-performance-exhaust">Exhaust system intact with no leaks</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-intake" name="engine-performance-checks" value="intake">
                            <label for="engine-performance-intake">Air intake system clean and undamaged</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-data" name="engine-performance-checks" value="data">
                            <label for="engine-performance-data">Engine performance data collected and analyzed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="engine-performance-ecu" name="engine-performance-checks" value="ecu">
                            <label for="engine-performance-ecu">ECU data and error codes checked</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="engine-performance-status" id="engine-performance-pass" value="pass">
                            <label for="engine-performance-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="engine-performance-status" id="engine-performance-fail" value="fail">
                            <label for="engine-performance-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="engine-performance-status" id="engine-performance-warning" value="warning">
                            <label for="engine-performance-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="engine-performance-notes">Notes</label>
                    <textarea id="engine-performance-notes" rows="3" placeholder="Enter detailed notes about engine performance evaluation"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="engine-performance-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="engine-performance-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="engine-performance-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="engine-performance">Save Section</button>
            </div>
        </div>
        
        <!-- Fluid Analysis -->
        <div class="checklist-item" data-category="post-race" data-section="fluid-analysis">
            <div class="checklist-header">
                <div class="checklist-title">Fluid Analysis</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Check all vehicle fluids for level, condition, and contamination. Document any fluid consumption during the race and collect samples if required for further analysis.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="fluid-analysis-engine" name="fluid-analysis-checks" value="engine">
                            <label for="fluid-analysis-engine">Engine oil condition and level checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fluid-analysis-coolant" name="fluid-analysis-checks" value="coolant">
                            <label for="fluid-analysis-coolant">Coolant condition and level checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fluid-analysis-brake" name="fluid-analysis-checks" value="brake">
                            <label for="fluid-analysis-brake">Brake fluid condition and level checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fluid-analysis-steering" name="fluid-analysis-checks" value="steering">
                            <label for="fluid-analysis-steering">Power steering fluid condition and level checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fluid-analysis-trans" name="fluid-analysis-checks" value="trans">
                            <label for="fluid-analysis-trans">Transmission fluid condition and level checked</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fluid-analysis-samples" name="fluid-analysis-checks" value="samples">
                            <label for="fluid-analysis-samples">Fluid samples collected for laboratory analysis if required</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="fluid-analysis-consumption" name="fluid-analysis-checks" value="consumption">
                            <label for="fluid-analysis-consumption">Fluid consumption rates documented</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="fluid-analysis-status" id="fluid-analysis-pass" value="pass">
                            <label for="fluid-analysis-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="fluid-analysis-status" id="fluid-analysis-fail" value="fail">
                            <label for="fluid-analysis-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="fluid-analysis-status" id="fluid-analysis-warning" value="warning">
                            <label for="fluid-analysis-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="fluid-analysis-notes">Notes</label>
                    <textarea id="fluid-analysis-notes" rows="3" placeholder="Enter detailed notes about fluid analysis"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="fluid-analysis-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="fluid-analysis-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="fluid-analysis-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="fluid-analysis">Save Section</button>
            </div>
        </div>
        
        <!-- Data Analysis -->
        <div class="checklist-item" data-category="post-race" data-section="data-analysis">
            <div class="checklist-header">
                <div class="checklist-title">Data Acquisition Analysis</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Review and analyze data acquisition information collected during the race. Document any performance anomalies, temperature excursions, or system warnings.</p>
                </div>
                
                <div class="form-group">
                    <label>Specific Items</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="data-analysis-download" name="data-analysis-checks" value="download">
                            <label for="data-analysis-download">All race data downloaded and backed up</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="data-analysis-engine" name="data-analysis-checks" value="engine">
                            <label for="data-analysis-engine">Engine performance data analyzed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="data-analysis-temp" name="data-analysis-checks" value="temp">
                            <label for="data-analysis-temp">Temperature data reviewed for any excursions</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="data-analysis-pressure" name="data-analysis-checks" value="pressure">
                            <label for="data-analysis-pressure">Pressure data analyzed for abnormalities</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="data-analysis-events" name="data-analysis-checks" value="events">
                            <label for="data-analysis-events">Event markers and warnings reviewed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="data-analysis-sensors" name="data-analysis-checks" value="sensors">
                            <label for="data-analysis-sensors">Sensor functionality verified</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="data-analysis-report" name="data-analysis-checks" value="report">
                            <label for="data-analysis-report">Data analysis report prepared</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="data-analysis-status" id="data-analysis-pass" value="pass">
                            <label for="data-analysis-pass">Pass</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="data-analysis-status" id="data-analysis-fail" value="fail">
                            <label for="data-analysis-fail">Fail</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="data-analysis-status" id="data-analysis-warning" value="warning">
                            <label for="data-analysis-warning">Warning</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="data-analysis-notes">Notes</label>
                    <textarea id="data-analysis-notes" rows="3" placeholder="Enter detailed notes about data acquisition analysis"></textarea>
                </div>
                
                <div class="photo-container">
                    <label>Photo Evidence</label>
                    <div class="photo-preview" id="data-analysis-photo-preview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <button class="btn" id="data-analysis-photo-btn">
                        <i class="fas fa-camera"></i> Take Photo
                    </button>
                    <input type="file" id="data-analysis-photo-input" accept="image/*" capture="environment" style="display: none">
                </div>
                
                <button class="btn btn-success" data-save="data-analysis">Save Section</button>
            </div>
        </div>
        
        <!-- Learning Reflection -->
        <div class="checklist-item" data-category="post-race" data-section="learning-reflection">
            <div class="checklist-header">
                <div class="checklist-title">Learning Reflection & Employer Involvement</div>
                <div class="checklist-status status-pending">Pending</div>
            </div>
            <div class="checklist-content">
                <div class="guidance-text">
                    <p>Document how meaningful employer involvement has benefitted your learning during this inspection activity. Record what you have learned and how it will improve your future practice.</p>
                </div>
                
                <div class="form-group">
                    <label>Type of Employer Involvement</label>
                    <select id="employer-involvement-type">
                        <option value="">Select type of involvement</option>
                        <option value="Work Experience">Structured work experience</option>
                        <option value="Work Placement">Structured work placement</option>
                        <option value="Industry Projects">Projects set with industry input</option>
                        <option value="Master Class">Units delivered by industry practitioners</option>
                        <option value="Expert Witness">Industry practitioners as expert witnesses</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="employer-involvement-duration">Duration of Involvement</label>
                    <input type="text" id="employer-involvement-duration" placeholder="Enter duration (e.g., 2 days, 4 hours)">
                </div>
                
                <div class="form-group">
                    <label for="learning-reflection-notes">Reflection on Benefits and Learning</label>
                    <textarea id="learning-reflection-notes" rows="5" placeholder="Explain how the employer involvement has benefitted you and what you have learned during this inspection activity"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Status</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="learning-reflection-status" id="learning-reflection-pass" value="pass">
                            <label for="learning-reflection-pass">Complete</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="learning-reflection-status" id="learning-reflection-fail" value="fail">
                            <label for="learning-reflection-fail">Incomplete</label>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-success" data-save="learning-reflection">Save Section</button>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn" id="back-to-during-race">Back</button>
            <button class="btn btn-secondary" id="download-post-race-report">
                <i class="fas fa-download"></i> Download Phase Report
            </button>
            <button class="btn btn-success" id="next-to-report">Generate Report</button>
        </div>
    </div>
</div>
        
        <!-- Report Tab -->
        <div id="report" class="tab-content">
            <h2 class="section-title">Inspection Report</h2>
            
            <div class="summary-section">
                <h3>Report Summary</h3>
                <div id="report-summary">
                    <div class="summary-item">
                        <span>Student Name:</span>
                        <span id="summary-student-name">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Vehicle:</span>
                        <span id="summary-vehicle">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Date:</span>
                        <span id="summary-date">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Overall Status:</span>
                        <span id="summary-status">-</span>
                    </div>
                </div>
            </div>
            
            <div class="summary-section">
                <h3>Completion Status</h3>
                <div class="summary-item">
                    <span>Pre-Race Inspection:</span>
                    <span id="summary-pre-race">0%</span>
                </div>
                <div class="summary-item">
                    <span>During-Race Inspection:</span>
                    <span id="summary-during-race">0%</span>
                </div>
                <div class="summary-item">
                    <span>Post-Race Inspection:</span>
                    <span id="summary-post-race">0%</span>
                </div>
                <div class="summary-item">
                    <span>Overall Completion:</span>
                    <span id="summary-overall">0%</span>
                </div>
            </div>
            
            <div class="summary-section">
                <h3>Key Findings</h3>
                <div id="key-findings">
                    <p>Complete all inspection phases to generate key findings.</p>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn" id="back-to-post-race">Back</button>
                <button class="btn btn-success" id="preview-report">Preview Full Report</button>
                <button class="btn btn-secondary" id="download-report">
                    <i class="fas fa-download"></i> Download PDF
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast notifications -->
    <div class="toast-container" id="toast-container"></div>
    
    <!-- Report Preview Modal -->
    <div class="modal" id="report-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Full Inspection Report</div>
                <button class="modal-close" id="close-report-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="report-preview" class="report-container"></div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="close-preview">Close</button>
                <button class="btn btn-secondary" id="download-report-modal">
                    <i class="fas fa-download"></i> Download PDF
                </button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Motorsport Race Inspection Checklist App &copy; 2025</p>
    </footer>
    
    <script>
        // Store all app data
        const appData = {
            setup: {
                studentName: '',
                studentId: '',
                course: '',
                instructor: '',
                inspectionDate: '',
                vehicleMake: '',
                vehicleModel: '',
                vehicleYear: '',
                vehicleClass: '',
                vehicleNumber: ''
            },
            preRace: {},
            duringRace: {},
            postRace: {}
        };
        
// Define sections for each inspection category
const inspectionSections = {
    preRace: ['safety-equipment', 'engine', 'suspension', 'brakes', 'tyres'],
    duringRace: ['pit-safety', 'tyre-condition', 'brake-performance', 'fluid-levels'],
    postRace: ['overall-condition', 'safety-systems', 'critical-fasteners', 'tyre-wear', 'brake-analysis', 'suspension-analysis', 'drivetrain', 'engine-performance', 'fluid-analysis', 'data-analysis', 'learning-reflection']
};
        
        // Map category IDs to appData keys
        const categoryMap = {
            'pre-race': 'preRace',
            'during-race': 'duringRace',
            'post-race': 'postRace'
        };
        
        // DOM loaded event
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved data from localStorage if available
            loadSavedData();
            
            // Set up tab navigation
            setupTabNavigation();
            
            // Set up checklist item toggling
            setupChecklistToggle();
            
            // Set up photo capture
            setupPhotoCapture();
            
            // Set up save buttons
            setupSaveButtons();
            
            // Set up navigation buttons
            setupNavigationButtons();
            
            // Setup report generation
            setupReportGeneration();
            
            // Update all progress indicators
            updateAllProgress();
            
            // Update summary based on saved data
            updateSummary();
        });
        
        // Load saved data from localStorage
        function loadSavedData() {
            const savedData = localStorage.getItem('motorsportInspectionData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                
                // Merge saved data with appData
                Object.assign(appData, parsedData);
                
                // Fill form fields with saved data
                fillFormFields();
                
                // Update statuses for checklist items
                updateChecklistStatuses();
                
                // Show success toast
                showToast('Data loaded successfully from previous session', 'success');
            }
        }
        
        // Fill form fields with saved data
        function fillFormFields() {
            // Fill setup fields
            for (const field in appData.setup) {
                const element = document.getElementById(field.replace(/([A-Z])/g, '-$1').toLowerCase());
                if (element && appData.setup[field]) {
                    element.value = appData.setup[field];
                }
            }
            
            // Fill inspection fields for each category
            ['preRace', 'duringRace', 'postRace'].forEach(category => {
                for (const section in appData[category]) {
                    // Set status radios
                    if (appData[category][section].status) {
                        const statusRadio = document.getElementById(`${section}-${appData[category][section].status}`);
                        if (statusRadio) {
                            statusRadio.checked = true;
                        }
                    }
                    
                    // Set checkbox items
                    if (appData[category][section].checkedItems) {
                        appData[category][section].checkedItems.forEach(item => {
                            const checkbox = document.getElementById(`${section}-${item}`);
                            if (checkbox) {
                                checkbox.checked = true;
                            }
                        });
                    }
                    
                    // Set notes
                    const notesElement = document.getElementById(`${section}-notes`);
                    if (notesElement && appData[category][section].notes) {
                        notesElement.value = appData[category][section].notes;
                    }
                    
                    // Set photo preview if exists
                    const photoPreview = document.getElementById(`${section}-photo-preview`);
                    if (photoPreview && appData[category][section].photo) {
                        const img = document.createElement('img');
                        img.src = appData[category][section].photo;
                        photoPreview.innerHTML = '';
                        photoPreview.appendChild(img);
                    }
                }
            });
        }
        
        // Update checklist statuses based on saved data
        function updateChecklistStatuses() {
            const allSections = [...inspectionSections.preRace, ...inspectionSections.duringRace, ...inspectionSections.postRace];
            
            allSections.forEach(section => {
                const item = document.querySelector(`.checklist-item[data-section="${section}"]`);
                if (!item) return;
                
                const category = item.getAttribute('data-category');
                const dataCategory = categoryMap[category];
                
                if (appData[dataCategory] && appData[dataCategory][section] && appData[dataCategory][section].status) {
                    const statusElement = item.querySelector('.checklist-status');
                    if (statusElement) {
                        statusElement.className = `checklist-status status-${appData[dataCategory][section].status}`;
                        statusElement.textContent = appData[dataCategory][section].status.charAt(0).toUpperCase() + appData[dataCategory][section].status.slice(1);
                    }
                }
            });
        }
        
        // Set up tab navigation
        function setupTabNavigation() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Hide all tab contents
                    document.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    
                    // Remove active class from all tab buttons
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // Show the selected tab content
                    document.getElementById(tabId).classList.add('active');
                    
                    // Add active class to the clicked button
                    this.classList.add('active');
                });
            });
        }
        
        // Set up checklist item toggling
        function setupChecklistToggle() {
            const checklistHeaders = document.querySelectorAll('.checklist-header');
            
            checklistHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const content = this.nextElementSibling;
                    
                    if (content.classList.contains('active')) {
                        content.classList.remove('active');
                    } else {
                        // Close all other open checklist items in the same category
                        const category = this.closest('.checklist-item').getAttribute('data-category');
                        const openItems = document.querySelectorAll(`#${category}-checklist .checklist-content.active`);
                        
                        openItems.forEach(item => {
                            if (item !== content) {
                                item.classList.remove('active');
                            }
                        });
                        
                        content.classList.add('active');
                    }
                });
            });
        }
        
        // Set up photo capture
        function setupPhotoCapture() {
            const photoButtons = document.querySelectorAll('[id$="-photo-btn"]');
            
            photoButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const section = this.id.replace('-photo-btn', '');
                    const input = document.getElementById(`${section}-photo-input`);
                    input.click();
                });
            });
            
            const photoInputs = document.querySelectorAll('[id$="-photo-input"]');
            
            photoInputs.forEach(input => {
                input.addEventListener('change', function(event) {
                    if (event.target.files && event.target.files[0]) {
                        const section = this.id.replace('-photo-input', '');
                        const preview = document.getElementById(`${section}-photo-preview`);
                        const file = event.target.files[0];
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            preview.innerHTML = '';
                            
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            preview.appendChild(img);
                            
                            // Save photo to the appData
                            const category = preview.closest('.checklist-item').getAttribute('data-category');
                            const sectionId = preview.closest('.checklist-item').getAttribute('data-section');
                            
                            savePhotoData(category, sectionId, e.target.result);
                        };
                        
                        reader.readAsDataURL(file);
                    }
                });
            });
        }
        
        // Save photo data to appData
        function savePhotoData(category, section, dataUrl) {
            const dataCategory = categoryMap[category];
            
            if (!appData[dataCategory][section]) {
                appData[dataCategory][section] = {};
            }
            
            appData[dataCategory][section].photo = dataUrl;
            
            // Save to localStorage
            localStorage.setItem('motorsportInspectionData', JSON.stringify(appData));
            
            showToast('Photo saved', 'success');
        }
        
        // Set up save buttons
        function setupSaveButtons() {
            // Setup save button
            document.getElementById('save-setup').addEventListener('click', function() {
                saveSetupData();
            });
            
            // Section save buttons
            const sectionSaveButtons = document.querySelectorAll('[data-save]');
            
            sectionSaveButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const section = this.getAttribute('data-save');
                    const category = this.closest('.checklist-item').getAttribute('data-category');
                    
                    saveSectionData(category, section);
                });
            });
        }
        
        // Save setup data
        function saveSetupData() {
            appData.setup = {
                studentName: document.getElementById('student-name').value,
                studentId: document.getElementById('student-id').value,
                course: document.getElementById('course').value,
                instructor: document.getElementById('instructor').value,
                inspectionDate: document.getElementById('inspection-date').value,
                vehicleMake: document.getElementById('vehicle-make').value,
                vehicleModel: document.getElementById('vehicle-model').value,
                vehicleYear: document.getElementById('vehicle-year').value,
                vehicleClass: document.getElementById('vehicle-class').value,
                vehicleNumber: document.getElementById('vehicle-number').value
            };
            
            // Save to localStorage
            localStorage.setItem('motorsportInspectionData', JSON.stringify(appData));
            
            // Update summary
            updateSummary();
            
            showToast('Setup information saved', 'success');
        }
        
        // Save section data
        function saveSectionData(category, section) {
            const dataCategory = categoryMap[category];
            
            if (!appData[dataCategory]) {
                appData[dataCategory] = {};
            }
            
            if (!appData[dataCategory][section]) {
                appData[dataCategory][section] = {};
            }
            
            // Get status
            const statusRadios = document.getElementsByName(`${section}-status`);
            let selectedStatus = '';
            
            for (const radio of statusRadios) {
                if (radio.checked) {
                    selectedStatus = radio.value;
                    break;
                }
            }
            
            if (!selectedStatus) {
                showToast('Please select a status', 'error');
                return;
            }
            
            // Get notes
            const notes = document.getElementById(`${section}-notes`).value;
            
            // Get checkbox values
            const checkboxItems = document.getElementsByName(`${section}-checks`);
            const checkedItems = [];
            
            for (const checkbox of checkboxItems) {
                if (checkbox.checked) {
                    checkedItems.push(checkbox.value);
                }
            }
            
            // Save data
            appData[dataCategory][section].status = selectedStatus;
            appData[dataCategory][section].notes = notes;
            appData[dataCategory][section].checkedItems = checkedItems;
            
            // Update the checklist item status
            const statusElement = document.querySelector(`.checklist-item[data-section="${section}"] .checklist-status`);
            if (statusElement) {
                statusElement.className = `checklist-status status-${selectedStatus}`;
                statusElement.textContent = selectedStatus.charAt(0).toUpperCase() + selectedStatus.slice(1);
            }
            
            // Save to localStorage
            localStorage.setItem('motorsportInspectionData', JSON.stringify(appData));
            
            // Update progress
            updateProgress(category);
            
            // Update summary
            updateSummary();
            
            showToast('Section saved successfully', 'success');
        }
        
        // Set up navigation buttons
        function setupNavigationButtons() {
            // Setup to Pre-Race
            document.getElementById('next-to-pre-race').addEventListener('click', function() {
                navigateToTab('pre-race');
            });
            
            // Pre-Race to During-Race
            document.getElementById('next-to-during-race').addEventListener('click', function() {
                navigateToTab('during-race');
            });
            
            // During-Race to Post-Race
            document.getElementById('next-to-post-race').addEventListener('click', function() {
                navigateToTab('post-race');
            });
            
            // Post-Race to Report
            document.getElementById('next-to-report').addEventListener('click', function() {
                navigateToTab('report');
            });
            
            // Back buttons
            document.getElementById('back-to-setup').addEventListener('click', function() {
                navigateToTab('setup');
            });
            
            document.getElementById('back-to-pre-race').addEventListener('click', function() {
                navigateToTab('pre-race');
            });
            
            document.getElementById('back-to-during-race').addEventListener('click', function() {
                navigateToTab('during-race');
            });
            
            document.getElementById('back-to-post-race').addEventListener('click', function() {
                navigateToTab('post-race');
            });
        }
        
        // Navigate to tab
        function navigateToTab(tabId) {
            const tabBtn = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
            if (tabBtn) {
                tabBtn.click();
            }
        }
        
        // Update progress for a category
        function updateProgress(category) {
            const dataCategory = categoryMap[category];
            const sections = inspectionSections[dataCategory];
            
            let completedSections = 0;
            
            sections.forEach(section => {
                if (appData[dataCategory][section] && appData[dataCategory][section].status) {
                    completedSections++;
                }
            });
            
            const progressPercentage = Math.round((completedSections / sections.length) * 100);
            
            // Update progress element
            const progressElement = document.getElementById(`${category}-progress`);
            const progressBarElement = document.getElementById(`${category}-progress-bar`);
            
            if (progressElement && progressBarElement) {
                progressElement.textContent = `${progressPercentage}%`;
                progressBarElement.style.width = `${progressPercentage}%`;
            }
        }
        
        // Update all progress indicators
        function updateAllProgress() {
            updateProgress('pre-race');
            updateProgress('during-race');
            updateProgress('post-race');
        }
        
        // Update summary section
        function updateSummary() {
            // Update student and vehicle info
            document.getElementById('summary-student-name').textContent = appData.setup.studentName || '-';
            document.getElementById('summary-vehicle').textContent = `${appData.setup.vehicleMake || ''} ${appData.setup.vehicleModel || ''} (${appData.setup.vehicleYear || ''})`.trim() || '-';
            document.getElementById('summary-date').textContent = appData.setup.inspectionDate || '-';
            
            // Calculate overall status
            let overallStatus = 'Pending';
            let totalSections = 0;
            let completedSections = 0;
            let passedSections = 0;
            let failedSections = 0;
            let warningSections = 0;
            
            ['preRace', 'duringRace', 'postRace'].forEach(category => {
                const sections = inspectionSections[category];
                totalSections += sections.length;
                
                sections.forEach(section => {
                    if (appData[category][section] && appData[category][section].status) {
                        completedSections++;
                        
                        if (appData[category][section].status === 'pass') {
                            passedSections++;
                        } else if (appData[category][section].status === 'fail') {
                            failedSections++;
                        } else if (appData[category][section].status === 'warning') {
                            warningSections++;
                        }
                    }
                });
            });
            
            // Determine overall status
            if (completedSections === 0) {
                overallStatus = 'Not Started';
            } else if (completedSections < totalSections) {
                overallStatus = 'In Progress';
            } else if (failedSections > 0) {
                overallStatus = 'Failed';
            } else if (warningSections > 0) {
                overallStatus = 'Passed with Warnings';
            } else {
                overallStatus = 'Passed';
            }
            
            document.getElementById('summary-status').textContent = overallStatus;
            
            // Update completion percentages
            const preRaceProgress = Math.round((getCompletedSections('preRace') / inspectionSections.preRace.length) * 100);
            const duringRaceProgress = Math.round((getCompletedSections('duringRace') / inspectionSections.duringRace.length) * 100);
            const postRaceProgress = Math.round((getCompletedSections('postRace') / inspectionSections.postRace.length) * 100);
            const overallProgress = Math.round((completedSections / totalSections) * 100);
            
            document.getElementById('summary-pre-race').textContent = `${preRaceProgress}%`;
            document.getElementById('summary-during-race').textContent = `${duringRaceProgress}%`;
            document.getElementById('summary-post-race').textContent = `${postRaceProgress}%`;
            document.getElementById('summary-overall').textContent = `${overallProgress}%`;
            
            // Generate key findings
            if (completedSections > 0) {
                generateKeyFindings();
            }
        }
        
        // Get completed sections count for a category
        function getCompletedSections(category) {
            const sections = inspectionSections[category];
            let completed = 0;
            
            sections.forEach(section => {
                if (appData[category][section] && appData[category][section].status) {
                    completed++;
                }
            });
            
            return completed;
        }
        
        // Generate key findings
        function generateKeyFindings() {
            const keyFindingsElement = document.getElementById('key-findings');
            keyFindingsElement.innerHTML = '';
            
            // Get all findings with fail or warning status
            const findings = [];
            
            ['preRace', 'duringRace', 'postRace'].forEach(category => {
                const categoryName = category === 'preRace' ? 'Pre-Race' : category === 'duringRace' ? 'During-Race' : 'Post-Race';
                
                for (const section in appData[category]) {
                    if (appData[category][section].status === 'fail' || appData[category][section].status === 'warning') {
                        const sectionTitle = document.querySelector(`.checklist-item[data-section="${section}"] .checklist-title`).textContent;
                        
                        findings.push({
                            category: categoryName,
                            section: sectionTitle,
                            status: appData[category][section].status,
                            notes: appData[category][section].notes
                        });
                    }
                }
            });
            
            if (findings.length === 0) {
                const p = document.createElement('p');
                p.textContent = 'No issues detected in the completed sections.';
                keyFindingsElement.appendChild(p);
            } else {
                findings.forEach(finding => {
                    const div = document.createElement('div');
                    div.className = 'summary-item';
                    
                    const spanTitle = document.createElement('span');
                    spanTitle.textContent = `${finding.category} - ${finding.section}`;
                    
                    const spanStatus = document.createElement('span');
                    spanStatus.className = `status-${finding.status}`;
                    spanStatus.textContent = finding.status.charAt(0).toUpperCase() + finding.status.slice(1);
                    
                    div.appendChild(spanTitle);
                    div.appendChild(spanStatus);
                    
                    keyFindingsElement.appendChild(div);
                    
                    if (finding.notes) {
                        const notesPara = document.createElement('p');
                        notesPara.style.fontSize = '0.9rem';
                        notesPara.style.fontStyle = 'italic';
                        notesPara.style.marginBottom = '10px';
                        notesPara.textContent = finding.notes;
                        keyFindingsElement.appendChild(notesPara);
                    }
                });
            }
        }
        
        // Set up report generation
        function setupReportGeneration() {
            // Preview report button
            document.getElementById('preview-report').addEventListener('click', function() {
                generateReportPreview();
                document.getElementById('report-modal').style.display = 'block';
            });
            
            // Close modal buttons
            document.getElementById('close-report-modal').addEventListener('click', function() {
                document.getElementById('report-modal').style.display = 'none';
            });
            
            document.getElementById('close-preview').addEventListener('click', function() {
                document.getElementById('report-modal').style.display = 'none';
            });
            
            // Download report buttons
            document.getElementById('download-report').addEventListener('click', downloadPDF);
            document.getElementById('download-report-modal').addEventListener('click', downloadPDF);
            
            // Phase-specific download buttons
            document.getElementById('download-pre-race-report').addEventListener('click', function() {
                downloadPhasePDF('preRace', 'Pre-Race');
            });
            
            document.getElementById('download-during-race-report').addEventListener('click', function() {
                downloadPhasePDF('duringRace', 'During-Race');
            });
            
            document.getElementById('download-post-race-report').addEventListener('click', function() {
                downloadPhasePDF('postRace', 'Post-Race');
            });
        }
        
        // Generate report preview
        function generateReportPreview() {
            const reportPreview = document.getElementById('report-preview');
            reportPreview.innerHTML = '';
            
            // Create report header
            const header = document.createElement('div');
            header.className = 'report-header';
            
            const title = document.createElement('div');
            title.className = 'report-title';
            title.textContent = 'Motorsport Race Inspection Report';
            
            const subtitle = document.createElement('div');
            subtitle.className = 'report-subtitle';
            subtitle.textContent = `Generated on ${new Date().toLocaleDateString('en-GB')}`;
            
            header.appendChild(title);
            header.appendChild(subtitle);
            reportPreview.appendChild(header);
            
            // Add metadata
            const metadata = document.createElement('div');
            metadata.className = 'report-metadata';
            
            const metadataItems = [
                { label: 'Student Name', value: appData.setup.studentName || 'N/A' },
                { label: 'Student ID', value: appData.setup.studentId || 'N/A' },
                { label: 'Course', value: appData.setup.course || 'N/A' },
                { label: 'Instructor', value: appData.setup.instructor || 'N/A' },
                { label: 'Inspection Date', value: appData.setup.inspectionDate || 'N/A' },
                { label: 'Vehicle', value: `${appData.setup.vehicleMake || ''} ${appData.setup.vehicleModel || ''} (${appData.setup.vehicleYear || ''})`.trim() || 'N/A' },
                { label: 'Vehicle Class', value: appData.setup.vehicleClass || 'N/A' },
                { label: 'Vehicle Number', value: appData.setup.vehicleNumber || 'N/A' }
            ];
            
            metadataItems.forEach(item => {
                const metaItem = document.createElement('div');
                metaItem.className = 'report-metadata-item';
                
                const label = document.createElement('div');
                label.className = 'report-metadata-label';
                label.textContent = item.label;
                
                const value = document.createElement('div');
                value.className = 'report-metadata-value';
                value.textContent = item.value;
                
                metaItem.appendChild(label);
                metaItem.appendChild(value);
                metadata.appendChild(metaItem);
            });
            
            reportPreview.appendChild(metadata);
            
            // Add inspection sections
            const categories = [
                { id: 'preRace', title: 'Pre-Race Inspection' },
                { id: 'duringRace', title: 'During-Race Inspection' },
                { id: 'postRace', title: 'Post-Race Inspection' }
            ];
            
            categories.forEach(category => {
                const section = document.createElement('div');
                section.className = 'report-section';
                
                const sectionTitle = document.createElement('h2');
                sectionTitle.className = 'report-section-title';
                sectionTitle.textContent = category.title;
                
                section.appendChild(sectionTitle);
                
                // Add inspection items
                const sections = inspectionSections[category.id];
                
                sections.forEach(sectionId => {
                    if (appData[category.id][sectionId] && appData[category.id][sectionId].status) {
                        const sectionTitle = document.querySelector(`.checklist-item[data-section="${sectionId}"] .checklist-title`).textContent;
                        
                        const item = document.createElement('div');
                        item.className = 'report-item';
                        
                        const itemTitle = document.createElement('div');
                        itemTitle.className = 'report-item-title';
                        itemTitle.textContent = sectionTitle;
                        
                        const itemStatus = document.createElement('span');
                        itemStatus.className = `report-item-status status-${appData[category.id][sectionId].status}`;
                        itemStatus.textContent = appData[category.id][sectionId].status.charAt(0).toUpperCase() + appData[category.id][sectionId].status.slice(1);
                        
                        item.appendChild(itemTitle);
                        item.appendChild(itemStatus);
                        
                        if (appData[category.id][sectionId].notes) {
                            const itemNotes = document.createElement('div');
                            itemNotes.className = 'report-item-notes';
                            itemNotes.textContent = appData[category.id][sectionId].notes;
                            item.appendChild(itemNotes);
                        }
                        
                        if (appData[category.id][sectionId].photo) {
                            const itemImages = document.createElement('div');
                            itemImages.className = 'report-images';
                            
                            const img = document.createElement('img');
                            img.className = 'report-image';
                            img.src = appData[category.id][sectionId].photo;
                            img.alt = `${sectionTitle} photo`;
                            
                            itemImages.appendChild(img);
                            item.appendChild(itemImages);
                        }
                        
                        section.appendChild(item);
                    }
                });
                
                reportPreview.appendChild(section);
            });
            
            // Add footer
            const footer = document.createElement('div');
            footer.className = 'report-footer';
            footer.textContent = 'This report was generated using the Motorsport Race Inspection Checklist App';
            
            reportPreview.appendChild(footer);
        }
        
        // Download report as PDF
        function downloadPDF() {
            // Show toast indicating PDF generation
            showToast('Generating PDF...', 'info');
            
            // Get the report content
            const reportElement = document.getElementById('report-preview');
            
            // Use html2canvas to capture the report as an image
            html2canvas(reportElement).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                
                const imgWidth = 210;
                const pageHeight = 295;
                const imgHeight = canvas.height * imgWidth / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;
                
                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                while (heightLeft > 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                // Generate filename based on student name and date
                const studentName = appData.setup.studentName ? appData.setup.studentName.replace(/\s+/g, '_') : 'Unnamed';
                const today = new Date().toISOString().slice(0, 10);
                const filename = `Motorsport_Inspection_${studentName}_${today}.pdf`;
                
                pdf.save(filename);
                
                showToast('PDF downloaded successfully', 'success');
            });
        }
        
        // Download phase-specific PDF report
        function downloadPhasePDF(phase, phaseTitle) {
            // Show toast indicating PDF generation
            showToast(`Generating ${phaseTitle} phase report...`, 'info');
            
            // Create a temporary div to hold the phase report
            const tempReport = document.createElement('div');
            tempReport.className = 'report-container';
            tempReport.style.padding = '20px';
            tempReport.style.backgroundColor = 'white';
            tempReport.style.maxWidth = '800px';
            tempReport.style.margin = '0 auto';
            
            // Create report header
            const header = document.createElement('div');
            header.style.borderBottom = '2px solid #15803d';
            header.style.paddingBottom = '15px';
            header.style.marginBottom = '20px';
            
            const title = document.createElement('h1');
            title.style.color = '#15803d';
            title.style.fontSize = '24px';
            title.style.fontWeight = 'bold';
            title.textContent = `Motorsport ${phaseTitle} Inspection Report`;
            
            const subtitle = document.createElement('div');
            subtitle.style.color = '#64748b';
            subtitle.style.fontSize = '16px';
            subtitle.style.marginTop = '5px';
            subtitle.textContent = `Generated on ${new Date().toLocaleDateString('en-GB')}`;
            
            header.appendChild(title);
            header.appendChild(subtitle);
            tempReport.appendChild(header);
            
            // Add metadata
            const metadata = document.createElement('div');
            metadata.style.display = 'grid';
            metadata.style.gridTemplateColumns = 'repeat(2, 1fr)';
            metadata.style.gap = '10px';
            metadata.style.marginBottom = '20px';
            
            const metadataItems = [
                { label: 'Student Name', value: appData.setup.studentName || 'N/A' },
                { label: 'Student ID', value: appData.setup.studentId || 'N/A' },
                { label: 'Course', value: appData.setup.course || 'N/A' },
                { label: 'Instructor', value: appData.setup.instructor || 'N/A' },
                { label: 'Inspection Date', value: appData.setup.inspectionDate || 'N/A' },
                { label: 'Vehicle', value: `${appData.setup.vehicleMake || ''} ${appData.setup.vehicleModel || ''} (${appData.setup.vehicleYear || ''})`.trim() || 'N/A' },
                { label: 'Vehicle Class', value: appData.setup.vehicleClass || 'N/A' },
                { label: 'Vehicle Number', value: appData.setup.vehicleNumber || 'N/A' }
            ];
            
            metadataItems.forEach(item => {
                const metaItem = document.createElement('div');
                metaItem.style.backgroundColor = '#f8fafc';
                metaItem.style.padding = '10px';
                metaItem.style.borderRadius = '4px';
                
                const label = document.createElement('div');
                label.style.fontWeight = 'bold';
                label.style.color = '#15803d';
                label.style.fontSize = '14px';
                label.textContent = item.label;
                
                const value = document.createElement('div');
                value.style.fontSize = '16px';
                value.style.marginTop = '5px';
                value.textContent = item.value;
                
                metaItem.appendChild(label);
                metaItem.appendChild(value);
                metadata.appendChild(metaItem);
            });
            
            tempReport.appendChild(metadata);
            
            // Add phase-specific section
            const section = document.createElement('div');
            section.style.marginBottom = '20px';
            
            const sectionTitle = document.createElement('h2');
            sectionTitle.style.color = '#15803d';
            sectionTitle.style.fontSize = '18px';
            sectionTitle.style.fontWeight = 'bold';
            sectionTitle.style.borderBottom = '1px solid #e2e8f0';
            sectionTitle.style.paddingBottom = '5px';
            sectionTitle.style.marginBottom = '10px';
            sectionTitle.textContent = `${phaseTitle} Inspection Details`;
            
            section.appendChild(sectionTitle);
            
            // Add inspection items for this phase
            const sections = inspectionSections[phase];
            let itemsAdded = false;
            
            sections.forEach(sectionId => {
                if (appData[phase][sectionId] && appData[phase][sectionId].status) {
                    itemsAdded = true;
                    const sectionTitle = document.querySelector(`.checklist-item[data-section="${sectionId}"] .checklist-title`).textContent;
                    
                    const item = document.createElement('div');
                    item.style.marginBottom = '15px';
                    item.style.padding = '10px';
                    item.style.borderRadius = '4px';
                    item.style.backgroundColor = '#f8fafc';
                    
                    const itemTitle = document.createElement('div');
                    itemTitle.style.fontWeight = 'bold';
                    itemTitle.style.marginBottom = '5px';
                    itemTitle.textContent = sectionTitle;
                    
                    const itemStatus = document.createElement('span');
                    const statusClass = appData[phase][sectionId].status;
                    let statusColor = '';
                    
                    if (statusClass === 'pass') {
                        statusColor = '#22c55e';
                    } else if (statusClass === 'fail') {
                        statusColor = '#ef4444';
                    } else if (statusClass === 'warning') {
                        statusColor = '#eab308';
                    }
                    
                    itemStatus.style.display = 'inline-block';
                    itemStatus.style.padding = '3px 8px';
                    itemStatus.style.borderRadius = '4px';
                    itemStatus.style.fontSize = '12px';
                    itemStatus.style.fontWeight = 'bold';
                    itemStatus.style.backgroundColor = statusColor;
                    itemStatus.style.color = 'white';
                    itemStatus.textContent = appData[phase][sectionId].status.charAt(0).toUpperCase() + appData[phase][sectionId].status.slice(1);
                    
                    item.appendChild(itemTitle);
                    item.appendChild(itemStatus);
                    
                    if (appData[phase][sectionId].notes) {
                        const itemNotes = document.createElement('div');
                        itemNotes.style.marginTop = '10px';
                        itemNotes.style.fontStyle = 'italic';
                        itemNotes.textContent = appData[phase][sectionId].notes;
                        item.appendChild(itemNotes);
                    }
                    
                    if (appData[phase][sectionId].photo) {
                        const itemImages = document.createElement('div');
                        itemImages.style.marginTop = '10px';
                        
                        const img = document.createElement('img');
                        img.style.maxWidth = '100%';
                        img.style.height = '150px';
                        img.style.objectFit = 'cover';
                        img.style.borderRadius = '4px';
                        img.style.border = '1px solid #e2e8f0';
                        img.src = appData[phase][sectionId].photo;
                        img.alt = `${sectionTitle} photo`;
                        
                        itemImages.appendChild(img);
                        item.appendChild(itemImages);
                    }
                    
                    section.appendChild(item);
                }
            });
            
            if (!itemsAdded) {
                const noItems = document.createElement('p');
                noItems.textContent = 'No completed inspection items found for this phase.';
                section.appendChild(noItems);
            }
            
            tempReport.appendChild(section);
            
            // Add footer
            const footer = document.createElement('div');
            footer.style.marginTop = '30px';
            footer.style.textAlign = 'center';
            footer.style.color = '#64748b';
            footer.style.fontSize = '14px';
            footer.textContent = 'This report was generated using the Motorsport Race Inspection Checklist App';
            
            tempReport.appendChild(footer);
            
            // Append the temporary element to body but make it invisible
            tempReport.style.position = 'absolute';
            tempReport.style.left = '-9999px';
            document.body.appendChild(tempReport);
            
            // Use html2canvas to capture the report as an image
            html2canvas(tempReport).then(canvas => {
                // Remove the temporary element
                document.body.removeChild(tempReport);
                
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                
                const imgWidth = 210;
                const pageHeight = 295;
                const imgHeight = canvas.height * imgWidth / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;
                
                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                while (heightLeft > 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                // Generate filename based on student name, phase and date
                const studentName = appData.setup.studentName ? appData.setup.studentName.replace(/\s+/g, '_') : 'Unnamed';
                const today = new Date().toISOString().slice(0, 10);
                const filename = `Motorsport_${phaseTitle}_Inspection_${studentName}_${today}.pdf`;
                
                pdf.save(filename);
                
                showToast(`${phaseTitle} phase report downloaded successfully`, 'success');
            });
        }
        
        // Show toast notification
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div>${message}</div>
                <button class="toast-close">&times;</button>
            `;
            
            document.getElementById('toast-container').appendChild(toast);
            
            // Add event listener to close button
            toast.querySelector('.toast-close').addEventListener('click', function() {
                toast.remove();
            });
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                toast.remove();
            }, 5000);
        }
    </script>
</body>
</html>